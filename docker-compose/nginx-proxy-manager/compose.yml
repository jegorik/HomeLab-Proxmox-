# Nginx Proxy Manager Docker Compose
#
# Purpose:
# - Provides a web-based reverse proxy manager with Let's Encrypt support.
#   Ideal for routing traffic to multiple services in a home lab.
#
# Usage:
# - Create a `.env` file with required variables (see template.yml).
# - Run: docker compose up -d
# - Access the admin UI at http://<host>:81
#
# Default credentials (first login):
#   Email:    admin@example.com
#   Password: changeme
#
# Reference: https://nginxproxymanager.com/setup/

services:
  nginx-proxy-manager:
    image: jc21/nginx-proxy-manager:latest
    container_name: nginx-proxy-manager
    restart: unless-stopped
    ports:
      - "80:80"      # HTTP traffic
      - "443:443"    # HTTPS traffic
      - "81:81"      # Admin web UI
    environment:
      - TZ=${TZ:-Europe/Riga}
      # Uncomment to disable IPv6 if not available on host
      # - DISABLE_IPV6=true
    volumes:
      - data:/data
      - letsencrypt:/etc/letsencrypt
    healthcheck:
      test: ["CMD", "/usr/bin/check-health"]
      interval: 30s
      timeout: 10s
      retries: 3

volumes:
  data:
    driver: local
  letsencrypt:
    driver: local

